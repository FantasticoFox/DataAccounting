{
	"name": "DataAccounting",
	"author": [
		"Tim Bansemer",
		"Isaac Patka",
		"rht rhtbot@protonmail.com"
	],
	"url": "https://www.mediawiki.org/wiki/Extension:Example",
	"descriptionmsg": "example-desc",
	"license-name": "GPL-3.0-or-later",
	"type": "other",
	"requires": {
		"MediaWiki": ">= 1.35.0"
	},
	"config_prefix": "da",
	"config": {
		"DomainID": {
			"description": "The identifier for this PKC MediaWiki instance.",
			"value": "UnspecifiedDomainId"
		},
		"WitnessNetwork": {
			"description": "The Ethereum blockhain network used for witnessing.",
			"value": "goerli"
		},
		"SmartContractAddress": {
			"description": "The smart contract address used to publish for witnessing.",
			"value": "0x45f59310ADD88E6d23ca58A0Fa7A55BEE6d2a611"
		},
		"InjectSignature": {
			"description": "Whether to inject signature back to the page after signing.",
			"value": true
		}
	},
	"ConfigRegistry": {
		"da": "\\DataAccounting\\Config\\Handler::configFactoryCallback"
	},
	"MessagesDirs": {
		"Example": [
			"i18n",
			"i18n/api"
		]
	},
	"ExtensionMessagesFiles": {
		"ExampleAlias": "Example.i18n.alias.php",
		"ExampleMagic": "Example.i18n.magic.php"
	},
	"AutoloadNamespaces": {
		"DataAccounting\\": "includes/"
	},
	"APIListModules": {
		"example": "DataAccounting\\ApiQueryExample"
	},
	"SpecialPages": {
		"Witness": {
			"class": "DataAccounting\\SpecialWitness",
			"services": [
				"PermissionManager"
			]
		},
		"WitnessPublisher": {
			"class": "DataAccounting\\SpecialWitnessPublisher",
			"services": [
				"PermissionManager"
			]
		},
		"DataAccountingConfig": {
			"class": "DataAccounting\\SpecialDataAccountingConfig",
			"services": [
				"PermissionManager"
			]
		},
		"VerifiedImport": {
			"class": "DataAccounting\\SpecialVerifiedImport",
			"services": [
				"PermissionManager",
				"VerifiedWikiImporterFactory"
			]
		},
		"VerifiedExport": {
			"class": "DataAccounting\\SpecialVerifiedExport"
		}
	},

	"Actions": {
		"daact": "DataAccounting\\DAAction"
	},

	"namespaces": [
		{
			"id": 6942,
			"constant": "NS_DATAACCOUNTING",
			"name": "Data_Accounting",
			"subpages": false,
			"content": false,
			"defaultcontentmodel": "wikitext"
		},
		{
			"id": 6943,
			"constant": "NS_DATAACCOUNTING_TALK",
			"name": "Data_Accounting_talk",
			"subpages": true,
			"content": false,
			"defaultcontentmodel": "wikitext"
		}
	],
	"Hooks": {
		"BeforePageDisplay": "handleHooks",
		"ParserFirstCallInit": "handleHooks",
		"ParserGetVariableValueSwitch": "handleHooks",
		"SkinTemplateNavigation": "handleHooks",
		"OutputPageParserOutput": "handleHooks",
		"RevisionFromEditComplete": "handleHashWriterHooks",
		"RevisionRecordInserted": "handleHashWriterHooks",
		"ArticleDeleteComplete": "handleHashWriterHooks",
		"PageMoveComplete": "handleHashWriterHooks",
		"LoadExtensionSchemaUpdates": {
			"handler": "handleHashWriterHooks"
		},
		"XmlDumpWriterOpenPage": "DataAccounting\\Hooks::onXmlDumpWriterOpenPage",
		"XmlDumpWriterWriteRevision": "DataAccounting\\Hooks::onXmlDumpWriterWriteRevision",
		"ImportHandlePageXMLTag": "DataAccounting\\Hooks::onImportHandlePageXMLTag",
		"MediaWikiServices": [ "registerRevisionSlots", "overridePageUpdaterFactory" ],
		"DASaveRevisionAddSlots": "addTransclusionHashes",
		"MultiContentSave": "addTransclusionHashes",
		"BeforeParserFetchTemplateRevisionRecord": "controlTranscludedContent",
		"BeforeParserFetchFileAndTitle": "controlTranscludedContent"
	},
	"HookHandlers": {
		"handleHooks": {
			"class": "DataAccounting\\Hooks",
			"services": [ "PermissionManager" ]
		},
		"handleHashWriterHooks": {
			"class": "DataAccounting\\HashWriterHooks"
		},
		"registerRevisionSlots": {
			"class": "DataAccounting\\Hook\\RegisterRevisionSlots"
		},
		"overridePageUpdaterFactory": {
			"class": "DataAccounting\\Hook\\OverridePageUpdaterFactory"
		},
		"addTransclusionHashes": {
			"class": "DataAccounting\\Hook\\AddTransclusionHashesOnSave",
			"services": [ "TitleFactory" ]
		},
		"controlTranscludedContent": {
			"class": "DataAccounting\\Hook\\ControlTranscludedContent",
			"services": [ "DataAccountingTransclusionManager", "RevisionStore", "RepoGroup" ]
		}
	},
	"RestRoutes": [
		{
			"path": "/data_accounting/get_server_info",
			"class": "DataAccounting\\API\\GetServerInfoHandler"
		},
		{
			"path": "/data_accounting/verify_page/{rev_id}",
			"class": "DataAccounting\\API\\VerifyPageHandler",
			"services": [
				"PermissionManager",
				"DBLoadBalancer",
				"RevisionLookup"
			]
		},
		{
			"path": "/data_accounting/get_page_all_revs/{page_title}",
			"class": "DataAccounting\\API\\GetPageAllRevsHandler",
			"services": [
				"PermissionManager",
				"TitleFactory"
			]
		},
		{
			"path": "/data_accounting/get_page_last_rev/{page_title}",
			"class": "DataAccounting\\API\\GetPageLastRevHandler",
			"services": [
				"PermissionManager",
				"DBLoadBalancer",
				"TitleFactory"
			]
		},
		{
			"path": "/data_accounting/get_witness_data/{witness_event_id}",
			"class": "DataAccounting\\API\\GetWitnessDataHandler"
		},
		{
			"path": "/data_accounting/request_merkle_proof/{witness_event_id}/{revision_verification_hash}",
			"class": "DataAccounting\\API\\RequestMerkleProofHandler"
		},
		{
			"path": "/data_accounting/request_hash/{rev_id}",
			"class": "DataAccounting\\API\\RequestHashHandler",
			"services": [
				"PermissionManager",
				"DBLoadBalancer",
				"RevisionLookup"
			]
		},
		{
			"path": "/data_accounting/get_revision/{verification_hash}",
			"class": "DataAccounting\\API\\GetRevisionHandler",
			"services": [
				"PermissionManager",
				"DBLoadBalancer",
				"RevisionLookup"
			]
		},
		{
			"path": "/data_accounting/get_hash_chain_info/{id_type}/{id}",
			"class": "DataAccounting\\API\\GetHashChainInfoHandler",
			"services": [
				"PermissionManager",
				"TitleFactory",
				"DBLoadBalancer"
			]
		},
		{
			"path": "/data_accounting/get_revision_hashes/{verification_hash}",
			"class": "DataAccounting\\API\\GetRevisionHashesHandler",
			"services": [
				"PermissionManager",
				"DBLoadBalancer",
				"RevisionLookup"
			]
		},
		{
			"method": "POST",
			"path": "/data_accounting/write/store_signed_tx",
			"class": "DataAccounting\\API\\WriteStoreSignedTxHandler",
			"services": [
				"PermissionManager",
				"DBLoadBalancer",
				"WikiPageFactory",
				"PageUpdaterFactory",
				"RevisionStore",
				"CommentStore"
			]
		},
		{
			"method": "POST",
			"path": "/data_accounting/write/store_witness_tx",
			"class": "DataAccounting\\API\\WriteStoreWitnessTxHandler",
			"services": [
				"PermissionManager"
			]
		}
	],
	"ResourceFileModulePaths": {
		"localBasePath": "modules/"
	},
	"ResourceModules": {
		"ext.DataAccounting.signMessage": {
			"styles": [
			],
			"scripts": [
				"ethers-5.0.umd.min.js",
				"ext.DataAccounting.signMessage/index.js",
				"ext.DataAccounting.signMessage/init.js"
			]
		},
		"publishDomainManifest": {
			"scripts": [
				"publishDomainManifest/index.js",
				"publishDomainManifest/init.js"
			]
		}
	},
	"ServiceWiringFiles": [
		"includes/ExportImport/ServiceWiring.php",
		"includes/ServiceWiring.php"
	],
	"ContentHandlers": {
		"signature": "DataAccounting\\ContentHandler\\SignatureHandler",
		"transclusion-hashes": "DataAccounting\\ContentHandler\\TransclusionHashesHandler"
	},
	"manifest_version": 2
}
